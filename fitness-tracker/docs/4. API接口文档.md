# API接口文档

本文档详细说明了Fitness Tracker应用的所有API接口。

## 认证接口

### 用户注册
- **URL**: `POST /api/auth/register`
- **描述**: 注册新用户
- **请求参数**:
  ```json
  {
    "name": "用户名",
    "email": "邮箱",
    "password": "密码"
  }
  ```
- **响应**:
  ```json
  {
    "id": "用户ID",
    "name": "用户名",
    "email": "邮箱",
    "token": "JWT令牌"
  }
  ```

### 用户登录
- **URL**: `POST /api/auth/login`
- **描述**: 用户登录
- **请求参数**:
  ```json
  {
    "email": "邮箱",
    "password": "密码"
  }
  ```
- **响应**:
  ```json
  {
    "id": "用户ID",
    "name": "用户名",
    "email": "邮箱",
    "token": "JWT令牌"
  }
  ```

## 用户接口

### 获取用户资料
- **URL**: `GET /api/users/profile`
- **描述**: 获取当前登录用户的资料
- **请求头**: 
  ```
  Authorization: Bearer <token>
  ```
- **响应**:
  ```json
  {
    "id": "用户ID",
    "name": "用户名",
    "email": "邮箱",
    "age": "年龄",
    "height": "身高(cm)",
    "weight": "体重(kg)",
    "gender": "性别"
  }
  ```

### 更新用户资料
- **URL**: `PUT /api/users/profile`
- **描述**: 更新当前登录用户的资料
- **请求头**: 
  ```
  Authorization: Bearer <token>
  ```
- **请求参数**:
  ```json
  {
    "name": "用户名",
    "age": "年龄",
    "height": "身高(cm)",
    "weight": "体重(kg)",
    "gender": "性别"
  }
  ```
- **响应**:
  ```json
  {
    "id": "用户ID",
    "name": "用户名",
    "email": "邮箱",
    "age": "年龄",
    "height": "身高(cm)",
    "weight": "体重(kg)",
    "gender": "性别"
  }
  ```

## 运动记录接口

### 获取所有运动记录
- **URL**: `GET /api/workouts`
- **描述**: 获取当前用户的所有运动记录
- **请求头**: 
  ```
  Authorization: Bearer <token>
  ```
- **响应**:
  ```json
  [
    {
      "id": "运动记录ID",
      "name": "运动名称",
      "type": "运动类型",
      "duration": "运动时长(分钟)",
      "calories": "消耗卡路里",
      "distance": "距离(公里)",
      "steps": "步数",
      "date": "运动日期",
      "notes": "备注"
    }
  ]
  ```

### 创建新的运动记录
- **URL**: `POST /api/workouts`
- **描述**: 创建新的运动记录
- **请求头**: 
  ```
  Authorization: Bearer <token>
  ```
- **请求参数**:
  ```json
  {
    "name": "运动名称",
    "type": "运动类型",
    "duration": "运动时长(分钟)",
    "calories": "消耗卡路里",
    "distance": "距离(公里)",
    "steps": "步数",
    "date": "运动日期",
    "notes": "备注"
  }
  ```
- **响应**:
  ```json
  {
    "id": "运动记录ID",
    "name": "运动名称",
    "type": "运动类型",
    "duration": "运动时长(分钟)",
    "calories": "消耗卡路里",
    "distance": "距离(公里)",
    "steps": "步数",
    "date": "运动日期",
    "notes": "备注"
  }
  ```

### 根据ID获取运动记录
- **URL**: `GET /api/workouts/:id`
- **描述**: 根据ID获取特定运动记录
- **请求头**: 
  ```
  Authorization: Bearer <token>
  ```
- **响应**:
  ```json
  {
    "id": "运动记录ID",
    "name": "运动名称",
    "type": "运动类型",
    "duration": "运动时长(分钟)",
    "calories": "消耗卡路里",
    "distance": "距离(公里)",
    "steps": "步数",
    "date": "运动日期",
    "notes": "备注"
  }
  ```

### 更新运动记录
- **URL**: `PUT /api/workouts/:id`
- **描述**: 更新特定运动记录
- **请求头**: 
  ```
  Authorization: Bearer <token>
  ```
- **请求参数**:
  ```json
  {
    "name": "运动名称",
    "type": "运动类型",
    "duration": "运动时长(分钟)",
    "calories": "消耗卡路里",
    "distance": "距离(公里)",
    "steps": "步数",
    "date": "运动日期",
    "notes": "备注"
  }
  ```
- **响应**:
  ```json
  {
    "id": "运动记录ID",
    "name": "运动名称",
    "type": "运动类型",
    "duration": "运动时长(分钟)",
    "calories": "消耗卡路里",
    "distance": "距离(公里)",
    "steps": "步数",
    "date": "运动日期",
    "notes": "备注"
  }
  ```

### 删除运动记录
- **URL**: `DELETE /api/workouts/:id`
- **描述**: 删除特定运动记录
- **请求头**: 
  ```
  Authorization: Bearer <token>
  ```
- **响应**:
  ```json
  {
    "message": "运动记录删除成功"
  }
  ```

## 统计接口

### 获取运动统计数据
- **URL**: `GET /api/stats/workouts`
- **描述**: 获取用户的运动统计数据
- **请求头**: 
  ```
  Authorization: Bearer <token>
  ```
- **响应**:
  ```json
  {
    "totalWorkouts": "总运动次数",
    "totalDuration": "总运动时长(分钟)",
    "totalCalories": "总消耗卡路里"
  }
  ```

### 获取周度统计数据
- **URL**: `GET /api/stats/weekly`
- **描述**: 获取用户本周的运动统计数据
- **请求头**: 
  ```
  Authorization: Bearer <token>
  ```
- **响应**:
  ```json
  {
    "weeklyData": [
      {
        "date": "日期",
        "workouts": "当日运动次数",
        "duration": "当日运动时长",
        "calories": "当日消耗卡路里"
      }
    ],
    "typeDistribution": [
      {
        "type": "运动类型",
        "count": "次数"
      }
    ]
  }
  ```